var data,margin={left:70,right:20,top:30,bottom:50},blue="#0984e3";function drawGraph(t){var e=300-margin.top-margin.bottom,a=d3.select("#graphs").node().offsetWidth-margin.left-margin.right,n=d3.scalePoint().rangeRound([0,a]).padding(.1),r=d3.scaleLinear().rangeRound([e,0]),o=d3.select("#main-graph");o.append("svg"),o.append("div").attr("class","tooltip"),o.select("svg").selectAll("*").remove();var i=o.select(".tooltip"),l=d3.line().x(function(t){return n(t.year)}).y(function(t){return r(t.cartoons.length)});n.domain(t.map(function(t){return""+t.year})),r.domain([0,d3.max(t,function(t){return t.cartoons.length})]),n.invert=d3.scaleQuantize().domain(n.range()).range(n.domain());var s=o.select("svg").attr("width",a+margin.left+margin.right).attr("height",e+margin.top+margin.bottom).on("mousemove",function(){}).on("mouseout",function(t){var e=d3.event.toElement;e&&e.parentNode.parentNode!=this.parentNode&&e.parentNode!=this.parentNode&&e!=this.parentNode&&i.classed("hidden",!0)}).append("g").attr("transform","translate("+margin.left+","+margin.top+")");s.append("path").data([t]).attr("class","line").style("stroke",blue).style("stroke-width","2px").style("fill","none").attr("d",l),s.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").style("fill",blue).attr("cx",function(t){return n(t.year)}).attr("cy",function(t){return r(t.cartoons.length)}).attr("r",5),s.append("g").style("font-family","Libre_Baskerville").attr("transform","translate(0,"+e+")").call(d3.axisBottom(n)),s.append("g").style("font-family","Libre_Baskerville").call(d3.axisLeft(r)),s.append("text").attr("transform","rotate(-90)").attr("y",0-margin.left+10).attr("x",0-e/2).attr("dy","1em").style("text-anchor","middle").style("font-family","Libre_Baskerville").style("font-weight","bold").text("Number of Cartoons"),s.append("text").attr("transform","translate("+a/2+" ,"+(e+margin.top+10)+")").style("text-anchor","middle").style("font-family","Libre_Baskerville").style("font-weight","bold").text("Year")}$.get("./data/data-min.json",function(t){drawGraph((data=t).map(function(t){return t.cartoons=t.cartoons.filter(function(t){return-1!=t.subject.indexOf("german")}),t}))});